(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0decf3"],{"86dc":function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"app-container",attrs:{id:"app"}},[a("div",[a("div",{staticClass:"tab-container"},[a("el-tabs",{staticClass:"tabs",on:{"tab-click":t.handleSelect},model:{value:t.activeIndex,callback:function(e){t.activeIndex=e},expression:"activeIndex"}},[a("el-tab-pane",{staticClass:"tab",attrs:{label:"wiki",name:"wiki"}}),a("el-tab-pane",{staticClass:"tab",attrs:{label:"about",name:"about"}})],1)],1),a("div",{staticClass:"main"},[a("el-card",{staticClass:"canvas-container"},[a("canvas",{attrs:{id:"myCanvas",width:"512",height:"512"}})]),a("el-card",{staticClass:"panel"},[a("el-row",[t._v(" 格子边长 "),a("el-select",{staticStyle:{width:"80px"},on:{change:t.go},model:{value:t.length,callback:function(e){t.length=e},expression:"length"}},t._l(t.sizeOptions,(function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1),t._v("上 "),a("el-color-picker",{attrs:{"color-format":"rgb"},on:{change:t.refresh},model:{value:t.upColor,callback:function(e){t.upColor=e},expression:"upColor"}}),t._v("下 "),a("el-color-picker",{attrs:{"color-format":"rgb"},on:{change:t.refresh},model:{value:t.downColor,callback:function(e){t.downColor=e},expression:"downColor"}})],1),a("el-row",[a("el-radio",{attrs:{label:"metropolis"},model:{value:t.simulateMode,callback:function(e){t.simulateMode=e},expression:"simulateMode"}},[t._v("metropolis")]),a("el-radio",{attrs:{label:"heat-bath"},model:{value:t.simulateMode,callback:function(e){t.simulateMode=e},expression:"simulateMode"}},[t._v("heat-bath")]),a("el-radio",{attrs:{label:"wolff-cluster"},model:{value:t.simulateMode,callback:function(e){t.simulateMode=e},expression:"simulateMode"}},[t._v("wolff-cluster")])],1),a("el-row",[t._v(" 温度 "),a("el-slider",{attrs:{min:Number(-2),max:Number(1),step:Number(.05),id:"temperature","format-tooltip":t.formatTooltipT},model:{value:t.temperature,callback:function(e){t.temperature=e},expression:"temperature"}})],1),a("el-row",[t._v(" 每帧步数 "),a("el-slider",{attrs:{min:Number(0),max:Number(12),step:Number(1),id:"spf","format-tooltip":t.formatTooltipSpf},model:{value:t.spf,callback:function(e){t.spf=e},expression:"spf"}})],1),a("el-button",{attrs:{type:"primary"},on:{click:t.act2}},[t._v("下一步")]),a("el-button",{attrs:{type:"primary"},on:{click:t.start}},[t._v("开始")]),a("el-button",{attrs:{type:"primary"},on:{click:t.go}},[t._v("初始化")]),a("el-button",{attrs:{type:"danger"},on:{click:t.stopAnimation}},[t._v("停止")])],1)],1),a("el-dialog",{attrs:{title:"wiki",visible:t.wikiEnabled,width:"80%"},on:{"update:visible":function(e){t.wikiEnabled=e},close:t.dialogClose}},[a("iframe",{attrs:{src:"https://zh.wikipedia.org/wiki/%E6%98%93%E8%BE%9B%E6%A8%A1%E5%9E%8B",width:"100%",height:"400px"}})])],1)])},s=[],r={data(){return{simulateMode:"metropolis",menuKey:"1",activeIndex:"none",spf:4,length:128,temperature:0,upColor:"rgb(255, 255, 255)",downColor:"rgb(0, 0, 0)",arr:[[-1]],energy:0,count:0,c:"",cxt:"",image:"",running:!1,wikiEnabled:!1,aboutEnabled:!1,spfOptions:[1,10,20,50,100,200,500,1e3,2e3,5e3,1e4,2e4,5e4],sizeOptions:[{value:32,label:"32"},{value:64,label:"64"},{value:128,label:"128"},{value:256,label:"256"},{value:512,label:"512"}]}},created(){setTimeout(()=>{this.go(),this.start()},100)},methods:{start(){this.running=!0;let t=this.simulateMode;"metropolis"==t?this.act_metro():"heat-bath"==t?this.act_hb():"wolff-cluster"==t&&this.act_wolff()},formatTooltipSpf(t){return this.spfOptions[t]},formatTooltipT(t){return Math.pow(10,t).toFixed(2)},handleSelect(t){"wiki"==t.label?this.wikiEnabled=!0:t.label},dialogClose(){this.activeIndex="none",this.activeIndex=""},act_hb(){if(this.running)if("heat-bath"==this.simulateMode){let t=this.length,e=t>100,a=this.spfOptions[this.spf],i=this.temperature;for(let s=0;s<a;s++){let a=parseInt(Math.random()*t*t),s=a%t,r=parseInt(a/t),l=this.getEnergy(s,r)*this.arr[s][r],o=-l,h=Math.pow(10,i).toFixed(2),n=Math.exp(-l/h),c=Math.exp(-o/h),p=n/(n+c);Math.random()<p?this.arr[s][r]=1:this.arr[s][r]=-1,e?this.draw(s,r):this.draw2(s,r)}e&&this.cxt.putImageData(this.image,0,0),setTimeout(()=>{this.act_hb()},1)}else"wolff-cluster"==this.simulateMode?this.act_wolff():"metropolis"==this.simulateMode&&this.act_metro()},act_wolff(){if(this.running)if("wolff-cluster"==this.simulateMode){let t=this.length,e=t>100,a=(this.spfOptions[this.spf],this.temperature),i=parseInt(Math.random()*t*t),s=new Array(t);for(let l=0;l<t;l++)s[l]=new Array(t).fill(0);let r=[{x:i%t,y:parseInt(i/t)}];while(0!=r.length){let e=[];for(let i=0;i<r.length;i++){let l=r[i];for(let i=-1;i<=1;i+=2)for(let r=-1;r<=1;r+=2){let o={};if(o.x=(l.x+(i+r)/2+t)%t,o.y=(l.y+(i-r)/2+t)%t,this.arr[l.x][l.y]==this.arr[o.x][o.y]&&0==s[o.x][o.y]){let t=Math.pow(10,a).toFixed(2),i=Math.exp(-2/t);Math.random()>i&&(e.push(o),s[o.x][o.y]=1)}}}r=e}for(let l=0;l<t;l++)for(let a=0;a<t;a++)1==s[l][a]&&(this.arr[l][a]*=-1,e?this.draw(l,a):this.draw2(l,a));e&&this.cxt.putImageData(this.image,0,0),"wolff-cluster"==this.simulateMode&&setTimeout(()=>{this.act_wolff()},1)}else"metropolis"==this.simulateMode?this.act_metro():"heat-bath"==this.simulateMode&&this.act_hb()},act_metro(){if(this.running)if("metropolis"==this.simulateMode){let t=this.length,e=t>100,a=this.spfOptions[this.spf],i=this.temperature;for(let s=0;s<a;s++){let a=parseInt(Math.random()*t*t),s=a%t,r=parseInt(a/t),l=this.getEnergy(s,r),o=-2*l,h=Math.pow(10,i).toFixed(2),n=Math.exp(-o/h);Math.random()<n&&(this.arr[s][r]*=-1,e?this.draw(s,r):this.draw2(s,r))}e&&this.cxt.putImageData(this.image,0,0),"metropolis"==this.simulateMode&&setTimeout(()=>{this.act_metro()},1)}else"wolff-cluster"==this.simulateMode?this.act_wolff():"heat-bath"==this.simulateMode&&this.act_hb()},act2(){this.next2(),this.cxt.putImageData(this.image,0,0)},act(){this.next2(),this.stop=window.requestAnimationFrame(this.act)},draw(t,e){let a=this.length,i=Math.log2(a);var s,r,l,o=JSON.parse(JSON.stringify(this.upColor)),h=JSON.parse(JSON.stringify(this.downColor));this.arr[t][e]+1>>1&1?(o=o.split("(")[1],o=o.split(")")[0],o=o.split(", "),s=parseInt(o[0]),r=parseInt(o[1]),l=parseInt(o[2])):(h=h.split("(")[1],h=h.split(")")[0],h=h.split(", "),s=parseInt(h[0]),r=parseInt(h[1]),l=parseInt(h[2]));for(let c=t<<9>>i;c<t+1<<9>>i;c++)for(let t=e<<9>>i;t<e+1<<9>>i;t++){var n=c+t*this.image.width<<2;this.image.data[n+0]=s,this.image.data[n+1]=r,this.image.data[n+2]=l}},draw2(t,e){let a=this.length,i=Math.log2(a);this.arr[t][e]+1>>1&1?this.cxt.fillStyle=this.upColor:this.cxt.fillStyle=this.downColor,this.cxt.fillRect(t<<9>>i,e<<9>>i,512>>i,512>>i)},stopAnimation(){this.running=!1,""!=this.stop&&window.cancelAnimationFrame(this.stop)},refresh(){for(var t=0;t<this.length;t++)for(var e=0;e<this.length;e++)this.draw(t,e);this.cxt.putImageData(this.image,0,0)},go(){this.arr=new Array,this.c=document.getElementById("myCanvas"),this.cxt=this.c.getContext("2d"),this.image=this.cxt.createImageData(this.c.width,this.c.height);let t=this.length,e=t>100;for(var a=0;a<this.image.data.length;a+=4)this.image.data[a+3]=255;for(var i=0;i<this.length;i++){this.arr[i]=new Array;for(var s=0;s<this.length;s++)0==Math.round(Math.random())?this.arr[i][s]=-1:this.arr[i][s]=1,e?this.draw(i,s):this.draw2(i,s)}e&&this.cxt.putImageData(this.image,0,0),this.drawer=!1},next(){for(var t=0;t<this.length;t++)for(var e=0;e<this.length;e++){let a=0,i=0,s=0,r=0;0!=t&&(a=this.arr[t-1][e]),t!=this.length-1&&(i=this.arr[t+1][e]),0!=e&&(s=this.arr[t][e-1]),e!=this.length-1&&(r=this.arr[t][e+1]);let l=a+i+s+r;l>0?this.arr[t][e]=1:l<0&&(this.arr[t][e]=-1)}this.draw()},next2(){let t=this.length,e=this.temperature;var a=[...new Array(t*t).keys()];a.sort(()=>{return.5-Math.random()});let i=0;a.forEach(a=>{let s=a%this.length,r=parseInt(a/t),l=this.getEnergy(s,r),o=-2*l,h=Math.pow(10,e).toFixed(2),n=Math.exp(-o/h);Math.random()<n&&(this.arr[s][r]*=-1,this.draw(s,r),i++)}),this.count=i},getEnergy(t,e){let a=this.length;if(t=Number(t),e=Number(e),t<0||t>=a|e<0||e>=a)return 0;{let i=0;for(let r=-1;r<=1;r+=2)for(let s=-1;s<=1;s+=2)i+=this.arr[(t+(r+s)/2+a)%a][(e+(r-s)/2+a)%a];let s=-this.arr[t][e]*i;return this.energy=s,s}}}},l=r,o=a("2877"),h=Object(o["a"])(l,i,s,!1,null,null,null);e["default"]=h.exports}}]);
//# sourceMappingURL=chunk-2d0decf3.02465969.js.map